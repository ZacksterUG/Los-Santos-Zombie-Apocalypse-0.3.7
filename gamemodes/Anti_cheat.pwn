// This is a comment
// uncomment the line below if you want to write a filterscript
//#define FILTERSCRIPT

#include <a_samp>
#include <nex-ac>

#if defined FILTERSCRIPT

public OnFilterScriptInit()
{
	print("\n--------------------------------------");
	print(" Nex_ac Activated");
	print("--------------------------------------\n");
	return 1;
}

public OnFilterScriptExit()
{
	return 1;
}

#else

main()
{
	print("\n----------------------------------");
	print(" Nex_ac deactivated");
	print("----------------------------------\n");
}

#endif
forward OnCheatDetected(playerid, ip_address[], type, code);
public OnCheatDetected(playerid, ip_address[], type, code)
{
    if(type) BlockIpAddress(ip_address, 0); //??????????? ?? IP (???????? ?? ??????? ????? ?????) - ?????? ???
    else //??????????? ?? ID ??????
    {
        switch(code) //????? ????
        {
            case 5: return 1; //???????? ????????? ???? (??????? ? ????? ?????? ?????? ?? ?? ??????? ?????, ????????? ????? ?? ??????)
            case 14: //??????
            {
                //?????????? ?????? ?????
                new a = AntiCheatGetMoney(playerid);
                ResetPlayerMoney(playerid);
                GivePlayerMoney(playerid, a);
                return 1; //???? ????????? ????? ??? ?? ?????
            }
            case 40: SendClientMessage(playerid, -1, MAX_CONNECTS_MSG); //????????? (???? 2-? ? ????? ??????? ? ?????? IP), ?????????
            case 41: SendClientMessage(playerid, -1, UNKNOWN_CLIENT_MSG); //?????? ??????? ?????? ?? ??????????, ????????? ? ???
            case 43..47: //???????
            {
                Kick(playerid); //?????? ????????????? ?????? ??? ????????, ????? ??? ?????? ???????? ???????
                return 1;
            }
            default: //????? ??? ????????? ????
            {
                return 1;
            }
        }
        new pPing = GetPlayerPing(playerid) + 150;
        SetTimerEx("ac_KickTimer", (pPing > 500 ? 500 : pPing), false, "i", playerid); //??? ?? 40 ? 41 ???, ac_KickTimer ???? ? ???????? ? ??????? ?????????
    }
    return 1;
}
